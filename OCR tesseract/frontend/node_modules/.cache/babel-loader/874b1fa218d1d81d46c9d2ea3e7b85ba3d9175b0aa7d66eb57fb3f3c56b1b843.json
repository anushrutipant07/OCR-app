{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Update from\"../components/Update.jsx\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const List=()=>{const[data,setData]=useState([]);const[filtered,setFiltered]=useState([]);const[text,setText]=useState(\"\");const[updateId,setUpdateId]=useState(null);const[loading,setLoading]=useState(false);const fetch=()=>{setLoading(true);axios.get(\"https://ocr-pgac.onrender.com/api/card/cards\").then(res=>{setLoading(false);setData(res.data);});};useEffect(()=>{fetch();},[updateId]);useEffect(()=>{if(text){let newArr=data.filter(d=>d.name.toLowerCase().includes(text.toLowerCase())||d.last_name.toLowerCase().includes(text.toLowerCase())||d.identification_number.toLowerCase().includes(text.toLowerCase()));setFiltered(newArr);}else{setFiltered(data);}},[data,text]);const handleDelete=id=>{console.log(id);axios.delete(\"https://ocr-pgac.onrender.com/api/card/cards/\".concat(id)).then(()=>fetch());};console.log(data);if(loading)return/*#__PURE__*/_jsx(_Fragment,{children:\"Loading...\"});if(updateId){return/*#__PURE__*/_jsx(Update,{id:updateId,setUpdateId:setUpdateId});}// providing the list of records\n//providing options like delete and update to the records\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{margin:'10px',display:\"flex\",alignItems:'center',padding:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{margin:'10px',color:\"white\"},htmlFor:\"text\",children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:text,onChange:e=>setText(e.target.value)})]}),filtered.map(d=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:\"white\",margin:\"10px\"},children:[\"{\",\"\\\"identification_number\\\": \\\"\",d.identification_number,\"\\\", \\\"name\\\": \\\"\",d.name,\"\\\", \\\"last_name\\\": \\\"\",d.last_name,\"\\\", \\\"date-of-birth\\\": \\\"\",d.date_of_birth,\"\\\", \\\"date-of-issue\\\": \\\"\",d.date_of_issue,\"\\\", \\\"date-of-expiry\\\": \\\"\",d.date_of_expiry,\"\\\"\",\"}\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{style:{cursor:'pointer',color:'white',background:'black',paddingInline:'10px',marginInline:'10px'},onClick:()=>handleDelete(d._id),children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{style:{cursor:'pointer',color:'white',background:'black',paddingInline:'10px',marginInline:'10px'},onClick:()=>setUpdateId(d._id),children:\"Update\"})]})]}))]});};export default List;","map":{"version":3,"names":["React","useState","useEffect","axios","Update","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","List","data","setData","filtered","setFiltered","text","setText","updateId","setUpdateId","loading","setLoading","fetch","get","then","res","newArr","filter","d","name","toLowerCase","includes","last_name","identification_number","handleDelete","id","console","log","delete","concat","children","style","margin","display","alignItems","padding","color","htmlFor","type","value","onChange","e","target","map","date_of_birth","date_of_issue","date_of_expiry","cursor","background","paddingInline","marginInline","onClick","_id"],"sources":["C:/Users/HP/Desktop/OCR app/OCR-app/OCR tesseract/frontend/src/pages/List.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Update from \"../components/Update.jsx\";\r\n\r\nconst List = () => {\r\n  const [data, setData] = useState([]);\r\n  const [filtered, setFiltered] = useState([]);\r\n  const [text, setText] = useState(\"\");\r\n  const [updateId, setUpdateId] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const fetch = () => {\r\n    setLoading(true);\r\n    axios.get(\"https://ocr-pgac.onrender.com/api/card/cards\").then((res) => {\r\n      setLoading(false);\r\n      setData(res.data);\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    fetch();\r\n  }, [updateId]);\r\n\r\n  useEffect(() => {\r\n    if (text) {\r\n      let newArr = data.filter(\r\n        (d) =>\r\n          d.name.toLowerCase().includes(text.toLowerCase()) ||\r\n          d.last_name.toLowerCase().includes(text.toLowerCase()) ||\r\n          d.identification_number.toLowerCase().includes(text.toLowerCase())\r\n      );\r\n      setFiltered(newArr);\r\n    } else {\r\n      setFiltered(data);\r\n    }\r\n  }, [data, text]);\r\n\r\n  const handleDelete = (id) => {\r\n    console.log(id);\r\n    axios.delete(`https://ocr-pgac.onrender.com/api/card/cards/${id}`).then(() => fetch());\r\n  };\r\n\r\n  console.log(data);\r\n  if (loading) return <>Loading...</>;\r\n\r\n  if (updateId) {\r\n    return <Update id={updateId} setUpdateId={setUpdateId} />;\r\n  }\r\n  // providing the list of records\r\n  //providing options like delete and update to the records\r\n  return (\r\n    <div>\r\n      <div style={{\r\n        margin: '10px',\r\n        display: \"flex\",\r\n        alignItems: 'center',\r\n        padding: '10px'\r\n      }}>\r\n        <label style={{\r\n            margin:'10px',\r\n            color: \"white\"\r\n        }} htmlFor=\"text\">Search</label>\r\n        <input\r\n          type=\"text\"\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n        />\r\n      </div>\r\n      {filtered.map((d) => (\r\n        <div>\r\n          <div\r\n            style={{\r\n              color: \"white\",\r\n              margin: \"10px\",\r\n            }}\r\n          >\r\n            {`{`}\r\n            \"identification_number\": \"{d.identification_number}\", \"name\": \"\r\n            {d.name}\", \"last_name\": \"{d.last_name}\", \"date-of-birth\": \"\r\n            {d.date_of_birth}\", \"date-of-issue\": \"{d.date_of_issue}\",\r\n            \"date-of-expiry\": \"{d.date_of_expiry}\"{`}`}\r\n          </div>\r\n          <div>\r\n            <button style={{\r\n                cursor: 'pointer',\r\n                color: 'white',\r\n                background: 'black',\r\n                paddingInline: '10px',\r\n                marginInline: '10px'\r\n            }} onClick={() => handleDelete(d._id)}>Delete</button>\r\n            <button style={{\r\n                cursor: 'pointer',\r\n                color: 'white',\r\n                background: 'black',\r\n                paddingInline: '10px',\r\n                marginInline: '10px'\r\n            }} onClick={() => setUpdateId(d._id)}>Update</button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default List;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAAC,OAAAC,QAAA,IAAAC,SAAA,gCAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACe,IAAI,CAAEC,OAAO,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACiB,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAqB,KAAK,CAAGA,CAAA,GAAM,CAClBD,UAAU,CAAC,IAAI,CAAC,CAChBlB,KAAK,CAACoB,GAAG,CAAC,8CAA8C,CAAC,CAACC,IAAI,CAAEC,GAAG,EAAK,CACtEJ,UAAU,CAAC,KAAK,CAAC,CACjBR,OAAO,CAACY,GAAG,CAACb,IAAI,CAAC,CACnB,CAAC,CAAC,CACJ,CAAC,CACDV,SAAS,CAAC,IAAM,CACdoB,KAAK,CAAC,CAAC,CACT,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEdhB,SAAS,CAAC,IAAM,CACd,GAAIc,IAAI,CAAE,CACR,GAAI,CAAAU,MAAM,CAAGd,IAAI,CAACe,MAAM,CACrBC,CAAC,EACAA,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACf,IAAI,CAACc,WAAW,CAAC,CAAC,CAAC,EACjDF,CAAC,CAACI,SAAS,CAACF,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACf,IAAI,CAACc,WAAW,CAAC,CAAC,CAAC,EACtDF,CAAC,CAACK,qBAAqB,CAACH,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACf,IAAI,CAACc,WAAW,CAAC,CAAC,CACrE,CAAC,CACDf,WAAW,CAACW,MAAM,CAAC,CACrB,CAAC,IAAM,CACLX,WAAW,CAACH,IAAI,CAAC,CACnB,CACF,CAAC,CAAE,CAACA,IAAI,CAAEI,IAAI,CAAC,CAAC,CAEhB,KAAM,CAAAkB,YAAY,CAAIC,EAAE,EAAK,CAC3BC,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC,CACfhC,KAAK,CAACmC,MAAM,iDAAAC,MAAA,CAAiDJ,EAAE,CAAE,CAAC,CAACX,IAAI,CAAC,IAAMF,KAAK,CAAC,CAAC,CAAC,CACxF,CAAC,CAEDc,OAAO,CAACC,GAAG,CAACzB,IAAI,CAAC,CACjB,GAAIQ,OAAO,CAAE,mBAAOZ,IAAA,CAAAF,SAAA,EAAAkC,QAAA,CAAE,YAAU,CAAE,CAAC,CAEnC,GAAItB,QAAQ,CAAE,CACZ,mBAAOV,IAAA,CAACJ,MAAM,EAAC+B,EAAE,CAAEjB,QAAS,CAACC,WAAW,CAAEA,WAAY,CAAE,CAAC,CAC3D,CACA;AACA;AACA,mBACET,KAAA,QAAA8B,QAAA,eACE9B,KAAA,QAAK+B,KAAK,CAAE,CACVC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBC,OAAO,CAAE,MACX,CAAE,CAAAL,QAAA,eACAhC,IAAA,UAAOiC,KAAK,CAAE,CACVC,MAAM,CAAC,MAAM,CACbI,KAAK,CAAE,OACX,CAAE,CAACC,OAAO,CAAC,MAAM,CAAAP,QAAA,CAAC,QAAM,CAAO,CAAC,cAChChC,IAAA,UACEwC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEjC,IAAK,CACZkC,QAAQ,CAAGC,CAAC,EAAKlC,OAAO,CAACkC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1C,CAAC,EACC,CAAC,CACLnC,QAAQ,CAACuC,GAAG,CAAEzB,CAAC,eACdlB,KAAA,QAAA8B,QAAA,eACE9B,KAAA,QACE+B,KAAK,CAAE,CACLK,KAAK,CAAE,OAAO,CACdJ,MAAM,CAAE,MACV,CAAE,CAAAF,QAAA,MAEG,+BACqB,CAACZ,CAAC,CAACK,qBAAqB,CAAC,kBACnD,CAACL,CAAC,CAACC,IAAI,CAAC,uBAAiB,CAACD,CAAC,CAACI,SAAS,CAAC,2BACtC,CAACJ,CAAC,CAAC0B,aAAa,CAAC,2BAAqB,CAAC1B,CAAC,CAAC2B,aAAa,CAAC,4BACpC,CAAC3B,CAAC,CAAC4B,cAAc,CAAC,IAAC,MACnC,CAAC,cACN9C,KAAA,QAAA8B,QAAA,eACEhC,IAAA,WAAQiC,KAAK,CAAE,CACXgB,MAAM,CAAE,SAAS,CACjBX,KAAK,CAAE,OAAO,CACdY,UAAU,CAAE,OAAO,CACnBC,aAAa,CAAE,MAAM,CACrBC,YAAY,CAAE,MAClB,CAAE,CAACC,OAAO,CAAEA,CAAA,GAAM3B,YAAY,CAACN,CAAC,CAACkC,GAAG,CAAE,CAAAtB,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtDhC,IAAA,WAAQiC,KAAK,CAAE,CACXgB,MAAM,CAAE,SAAS,CACjBX,KAAK,CAAE,OAAO,CACdY,UAAU,CAAE,OAAO,CACnBC,aAAa,CAAE,MAAM,CACrBC,YAAY,CAAE,MAClB,CAAE,CAACC,OAAO,CAAEA,CAAA,GAAM1C,WAAW,CAACS,CAAC,CAACkC,GAAG,CAAE,CAAAtB,QAAA,CAAC,QAAM,CAAQ,CAAC,EAClD,CAAC,EACH,CACN,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}